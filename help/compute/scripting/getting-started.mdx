---
title: "Getting started"
sidebar_position: 0
---

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BrowserWindow from '@site/src/components/browser-window';
```

## Prerequisites

* Sign up and log in to [public server of Datagrok](https://public.datagrok.ai/).
* Alternatively, set up a [local Datagrok environment](../deploy/docker-compose/docker-compose.mdx).

## Datagrok scripting essentials

This section explains the basic concepts of scripting in Datagrok.
Code examples are provided in **Python**, **R**, and **JavaScript**.

:::tip Consider JavaScript

In Datagrok, JavaScript offers unique benefits compared to traditional
data science languages like Python or R.

JavaScript script executes right in your browser, leading to:

* shorter spin-up time,
* and better debugging experience.

Datagrok provides an extensive JavaScript API, giving you:

* detailed control over viewer parameters,
* access to core Datagrok functions.

:::

### How to create a script

You can create a script directly on the platform in two ways:

```mdx-code-block
<Tabs>
<TabItem value="fast" label="Fast way" default>
```

<div style = {{ display: 'flex' }}>

<div style = {{ width: '50%' }}>

* Open Datagrok (e.g. [public homepage](https://public.datagrok.ai/))
* Select `Browse` icon on the left toolbar.
* Select Datagrok's [Scripts section](https://public.datagrok.ai/scripts).
* Click on the "New" button and create a new script in your preferred language.

</div>

<div style = {{ width: '50%', display: 'flex', 'justify-content': 'end' }}>

```mdx-code-block
<BrowserWindow url="" bodyStyle={{'padding': '0px'}}>
```

<img
  src={require('./pics/scripts.png').default}
  style= {{ height: '400px', 'border-radius': '5px'}}
/>

```mdx-code-block
</BrowserWindow>
```

</div>

</div>

```mdx-code-block
</TabItem>
<TabItem value="advanced" label="Advanced way">
```

* Enable extended **Main menu** in the **Window** icon on the right toolbar
* Open **Main manu > Tools > Scripting**.
* Choose the language for the script

```mdx-code-block
</TabItem>
</Tabs>
```

The code editor appears with the code inside.

```mdx-code-block
<Tabs>
<TabItem value="python" label="Python" default>
```

```python
#name: Template
#description: Calculates the number of cells in the table
#language: python
#tags: template, demo
#sample: cars.csv
#input: dataframe table [Data table]
#output: int count [Number of cells in the table]
count = table.shape[0] * table.shape[1]
```

```mdx-code-block
</TabItem>
<TabItem value="r" label="R">
```

```r
#name: Template
#description: Calculates the number of cells in the table
#language: r
#tags: template, demo
#sample: cars.csv
#input: dataframe table [Data table]
#output: int count [Number of cells in the table]
count <- nrow(table) * ncol(table)
```

```mdx-code-block
</TabItem>

<TabItem value="javascript" label="JavaScript">
```

```javascript
//name: Template
//description: Hello world script
//language: javascript

alert('Hello World!');
```

```mdx-code-block
</TabItem>

</Tabs>
```

Congratulations, you've just written a script in Datagrok!
Let's explore how it works.

### Script header

Each Datagrok script has a **header**. A header contains **header parameters** \-
special comment strings used by Datagrok to determine script name and language,
pass to the script input parameters, and capture script output.  

The template script has the following ones:

* `name: Template`: The short name of the script.
* `description: Calculates the number of cells in the table`: The human-readable description.
* `language: python`: The script language. Supported: *R*, *Python*, *Octave*, *Julia*, *JavaScript*.
* `tags: template, demo`: The list of the tags used to organize and search scripts.
* `input: dataframe table [Data table]`: The input parameter specification.
   The `table` is the parameter name, and `dataframe` is the parameter type.
   See the [supported parameter types](/help/datagrok/concepts/functions/func-params-annotation#inputs-and-outputs) for details.
* `output: int count [Number of cells in the table]`: The output parameter specification:
   The `int` variable with the name `count`.

For more details, refer to the [functions parameter annotation](/help/datagrok/concepts/functions/func-params-annotation).

### Runtime environment

For each language, Datagrok uses a predefined header and creates an environment with the set of pre-installed packages.

```mdx-code-block
<Tabs>
<TabItem value="python" label="Python" default>
```

```python
import os
import io
import json
import pandas as pd
import requests
from datetime import datetime, timedelta
```

```mdx-code-block
</TabItem>

<TabItem value="r" label="R">
```

```r
require(httr)
require(repr)
require(data.table)
require(R.utils)
```

```mdx-code-block
</TabItem>

<TabItem value="octave" label="Octave">
```

Octave scripts run in a separate container on server. This container has following Octave packages pre-installed:

* [symbolic](https://gnu-octave.github.io/packages/symbolic/)
* [optim](https://gnu-octave.github.io/packages/optim/)

Always provide `pkg load %PACKAGE_NAME%` in your scripts, since script runs are fully independent.

```mdx-code-block
</TabItem>

<TabItem value="julia" label="Julia">
```

```julia
using HTTP
using DataFrames
using CSV
using Compat
using MbedTLS
using Dates
using JSON
```

```mdx-code-block
</TabItem>

<TabItem value="javascript" label="JavaScript">
```

```javascript
import * as grok from 'datagrok-api/grok';
import * as ui from 'datagrok-api/ui';
import * as DG from 'datagrok-api/dg';
import * as OCL from 'openchemlib/full.js';
import * as rxjs from 'rxjs';
import * as rxjs.operators from 'rxjs/operators';
import * as $ from 'cash-dom';
import * as dayjs from 'dayjs';
import * as wu from 'wu';
import * as exceljs from 'ExcelJS';
import * as html2canvas from 'html2canvas';
```

```mdx-code-block
</TabItem>

</Tabs>
```

### How to run a script

Let's save the script and see how it works.
The built-in editor has the **Run** <i class="fas fa-play"></i> button on the top panel.
Press it to run a script. You will see the following window:

```mdx-code-block
<BrowserWindow url=''>
```

<div style={{'text-align': 'center'}}>

<img src={require('./pics/template-script-run.png').default} style={{'box-shadow': '#4D5261 0px 0px 5px', 'border': '1px solid #F2F2F5'}}/>

</div>

```mdx-code-block
</BrowserWindow>
```

When you run a script,
Datagrok analyzes header parameters
to create an input form and show the outputs.

Provide a dataframe for the script and press **OK** to run it.
You can choose an already opened dataframe,
open a dataframe from a file, or retrieve it via SQL query.

After the script finishes, Datagrok collects all output parameters and displays them.
In the provided example, this is a single scalar value shown in the **Variables** panel.
You will see the following output:

```mdx-code-block
<BrowserWindow url=''>
```

<div style={{'text-align': 'center'}}>

<img src={require('./pics/template-script-output.png').default} style={{'box-shadow': '#4D5261 0px 0px 5px', 'border': '1px solid #F2F2F5'}}/>

</div>

```mdx-code-block
</BrowserWindow>
```

:::tip Pro tip

Depending on the metadata associated with the parameters, the editor can be
enriched by [validators](./scripting-advanced#parameter-validators), [choices](scripting-advanced#parameter-choices),
and [suggestions](scripting-advanced#parameter-suggestions). Validators, choices, and suggestions are
[functions](/help/datagrok/concepts/functions/functions.md), that means they can be implemented in different ways
(database query, script, etc.), and reused.

:::

### Running previously saved scripts

To run the previously saved script, find it in the **Scripts** section and execute it.

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('../../uploads/gifs/scripting-visualization.gif').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

For additional capabilities of the Datagrok script editor, see the
[Working with Datagrok script editor](#working-with-datagrok-script-editor) section.

## Enhancing script input view

You may customize the script view using additional GUI-related options.
Most of them are hints to improve the interface for your scripts.
You should list options in curly braces in corresponding header lines.
The order of the hints makes no difference. All options are optional.

### Input captions and hints

You can add an arbitrary caption for an input parameter.
Proper caption helps the user to understand the meaning of the parameter.

To add a hint to the input parameter, place the hint text in the square brackets
after the parameter annotation.

```mdx-code-block
<Tabs>
<TabItem value="result" label="Result" default>
```

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('./pics/caption-example.png').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

```mdx-code-block
</TabItem>
<TabItem value="input" label="Input">
```

```python
#input: double V1 { caption: Initial volume of liquid } [Used to calculate the initial concentration and the volume change]
```

```mdx-code-block
</TabItem>
</Tabs>
```

### Units

You can add a proper unit label for an input parameter.
The unit label will appear in the input form next to the input field.

```mdx-code-block
<Tabs>
<TabItem value="result" label="Result" default>
```

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('./pics/units-example.png').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

```mdx-code-block
</TabItem>
<TabItem value="input" label="Input">
```

```python
#input: double initialTemp { units: °С }
```

```mdx-code-block
</TabItem>
</Tabs>
```

### Grouping inputs

You can group script inputs into categories using the `category` tag.
RichFunctionView renders categories as separate blocks of the input form.

```mdx-code-block
<Tabs>
<TabItem value="result" label="Result">
```

```mdx-code-block
<BrowserWindow url=''>
```

<div style={{'text-align': 'center'}}>

<img src={require('./pics/input-categories.png').default} style={{'box-shadow': '#4D5261 0px 0px 5px', 'border': '1px solid #F2F2F5'}}/>

</div>

```mdx-code-block
</BrowserWindow>
```

```mdx-code-block
</TabItem>
<TabItem value="short" label="Short sample">
```

```python
#input: double initialPressure { caption: Initial pressure; category: Experimental data }
#input: double desiredPressure { caption: Goal pressure; category: Goals }
```

```mdx-code-block
</TabItem>
<TabItem value="full" label="Full sample">
```

```python
#name: InputGroupingDemo
#language: python
#input: dataframe tempData { caption: Temperature data; category: Experimental data }
#input: double initialPressure { caption: Initial pressure; category: Experimental data }
#input: double desiredPressure { caption: Goal pressure; category: Goals }
#input: double desiredHumidity { caption: Goal humidity; category: Goals }
```

```mdx-code-block
</TabItem>
</Tabs>
```

### Adding viewers for output dataframes

You can specify viewers to review output dataframes in a human-friendly way.
Each dataframe parameter may have a list of viewers.
For instance, the following code adds `Scatter plot`
and `Line chart` viewers on the input dataframe.

You may see all available viewers opening
[demo dataframe](https://public.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/demog.csv)
and opening the toolbox on the left.

<details>
<summary> Fantastic viewers and where to find them </summary>
<div>

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('./pics/viewers-toolbox.png').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

</div>
</details>

```mdx-code-block
<Tabs>
<TabItem value="result" label="Result">
```

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('./pics/builtin-viewers.png').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

```mdx-code-block
</TabItem>
<TabItem value="input" label="Input">
```

```javascript
//name: Adding viewer on output dataframe
//language: javascript
//sample: demog.csv
//input: dataframe inputDF
//output: dataframe outputDF { viewer: Line chart | Scatter plot }

outputDF = inputDF
outputDF.name = "DF with linechart"
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::tip

The default script view supports viewers for *output* dataframes only.
You may specify viewers *input* dataframes using
[Rich function view](scripting-advanced.mdx#using-richfunctionview-input-control)

:::

### Customizing viewers

Each viewer has a list of customizable properties.
They change how the viewer is rendered and how it behaves.
For instance, you may specify the dataframe column used as the X-axis on the scatter plot.

The list of available properties differs for each type of viewer.
You may right-click on the viewer and select `Properties` item in the context menu.
In the `viewer` option, you can specify any property listed in the opened property panel.
For example, the following code:

* specifies marker type and size for linechart
* enables regression line rendering for scatterplot

:::tip

You should enter the viewer property in camelCase format.
For example, here "Show regression line" property
of the scatterplot becomes `showRegressionLine`.

:::

```mdx-code-block
<Tabs>
<TabItem value="result" label="Result">
```

```mdx-code-block
<BrowserWindow bodyStyle={{'padding': '0px'}} url=''>
```

<img src={require('./pics/viewers-customization.png').default} style={{'border-radius': '5px'}}/>

```mdx-code-block
</BrowserWindow>
```

```mdx-code-block
</TabItem>
<TabItem value="input" label="Input">
```

```javascript
//name: Viewers customization
//language: javascript
//sample: cars.csv
//input: dataframe inputDF
//output: dataframe outputDF { viewer: Scatter plot(y: "model", markerType: star, markerSize: 15) | Scatter plot(showRegressionLine: true) }

outputDF = inputDF
outputDF.name = "DF with customized viewers"
```

```mdx-code-block
</TabItem>
</Tabs>
```

The [RichFunctionView](scripting-advanced.mdx#using-richfunctionview-input-control)
control allows you to create much more complex

## Working with Datagrok script editor

### How to find and edit a script

To edit an existing script:

* Find it in the [Scripts section](https://public.datagrok.ai/scripts).
* Right-click on the script card. The context menu appears.
* Choose the **Edit** action. Built-in editor with script code opens.

You can use [smart search](../explore/search-filter-select/smart-search.md) to filter scripts.

### How to debug a script

<div style = {{ display: 'flex' }}>

<div style = {{ width: '50%' }}>

Datagrok has limited debugging capabilities.
All scripts except Javascript are executed in isolated environments,
and the only ways of communication between the script and Datagrok are
console log and the script output parameters.

When you run a script, Datagrok catches all log messages
and displays it in the log panel below the script.
If the script throws an unhandled exception,
Datagrok catches it and displays an error popup (shown on the right).

To include additional debug information in the log,
run the script using **Debug script** button in the ribbon menu.
Alternatively, run the script normally and press the
**Debug** button on the bottom part of the input parameter window.

![Script debug output](./pics/script-debud-output-enable.png)

For big and complicated scripts, we recommend you develop them locally in your IDE,
and then integrate them into Datagrok.

</div>

<div style = {{ width: '50%' }}>

```mdx-code-block
<BrowserWindow url=''>
```

<div style={{'text-align': 'center'}}>

<img src={require('./pics/script-exception.png').default} style={{'box-shadow': '#4D5261 0px 0px 5px', 'border': '1px solid #F2F2F5'}}/>

</div>

```mdx-code-block
</BrowserWindow>
```

</div>

</div>

### How to share a script

At that point, your script is only visible to you.
You can also
make it available to the whole community!

All sharing features are in the **Sharing** dialog.

* To open it, find your script in [Scripts section](https://public.datagrok.ai/scripts) and right-click on it.
* Choose the "Share..." option in the context menu.
In the dialog, you will see groups and users with their privileges.
* You may edit the list of collaborators and grant or revoke privileges at any moment.

<details>
<summary> Sharing step-by-step </summary>
<div>

```mdx-code-block
<BrowserWindow url=''>
```

<div style={{'text-align': 'center'}}>

<img src={require('./pics/sharing.gif').default} style={{'border-radius': '5px'}}/>

</div>

```mdx-code-block
</BrowserWindow>
```

</div>
</details>

### How to delete a script

* Find your script in [Scripts section](https://public.datagrok.ai/scripts).
* Right-click on it. The context menu opens.
* Choose **Delete** option.

:::caution

This action is irreversible!
Your collaborators will lose access to it, and all historical runs will become inaccessible.

:::

