---
title: "Scripting for non-professional developers"
---

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

This section provides a quick introduction for Datagrok scripting.

## Prerequisites

* Sign up and login to [public server of Datagrok](https://public.datagrok.ai/).
* Alternatively, set up a [local Datagrok environment](../deploy/docker-compose/docker-compose.mdx).

## Datagrok scripting essentials

This section explains basic concepts of scripting in Datagrok.
Code examples are written in **Python** and **R**.
However, the same concepts are applicable to all other supported languages.

:::tip Pro tip

The JavaScript historically is not considered as a language for data science.
However, in Datagrok Javascript has several advantages
over "traditional" data science languages, like Python or R:

* JS scripts run locally in the browser,
  so you can start them faster and achieve better responsibility to user actions.
* Datagrok has wide range of JS API, allowing you to precisely control parameters of
  all Datagrok viewers, call functions of Datagrok core and perform some other advanced features.

Therefore, for advanced scripting in Datagrok we recommend you to try Javascript.

:::

### How to create a script

You can create a script directly on the platform by two ways:

```mdx-code-block
<Tabs>
<TabItem value="fast" label="Fast way" default>
```

* Open Datagrok (e.g. [public homepage](https://public.datagrok.ai/))
* Select `Functions` icon on the right toolbar.
* Select Datagrok's [Scripts section](https://public.datagrok.ai/scripts).
* Hover over the taskbar on the left side. Toolbox appears.
* Open **Actions** submenu and create a new script in preferred language.
![scripts](scripts.png)

```mdx-code-block
</TabItem>
<TabItem value="advanced" label="Advanced way">
```

* Enable extended **Main menu** in the **Window** icon on the right toolbar
* Open **Main manu > Tools > Scripting**.
* Choose the language for the script

```mdx-code-block
</TabItem>
</Tabs>
```

The code editor appears with the code inside.

```mdx-code-block
<Tabs>
<TabItem value="python" label="Python" default>
```

```python
#name: Template
#description: Calculates number of cells in the table
#language: python
#tags: template, demo
#sample: cars.csv
#input: dataframe table [Data table]
#output: int count [Number of cells in table]
count = table.shape[0] * table.shape[1]
```

```mdx-code-block
</TabItem>
<TabItem value="r" label="R">
```

```r
#name: Template
#description: Calculates number of cells in the table
#language: r
#tags: template, demo
#sample: cars.csv
#input: dataframe table [Data table]
#output: int count [Number of cells in table]
count <- nrow(table) * ncol(table)
```

```mdx-code-block
</TabItem>
</Tabs>
```

Congratulations, you've just written a script in Datagrok!
This is a very simple example script calculating the number of cells in a dataframe.
Let's explore how it works.

### Script header

Each Datagrok script has the **header** that contains **header parameters** \-
special comment strings used by Datagrok to determine script name and language,
pass to the script input parameters, and capture script output.  

The template script has the following ones:

* `# name: Template`: The short name of the script.
* `# description: Calculates number of cells in the table`: Human readable description.
* `# language: python`: The script language.
   See the [full list of supported languages](header-parameters.md#supported-languages)
* `# tags: template, demo`: The list of tags used to organise and search scripts.
* `# input: dataframe table [Data table]`: Specification of the input parameter.
   The `table` is the parameter name, and `dataframe` is the parameter type.
   See the [supported parameter types](header-parameters.md#format-template-for-input-and-output) for details.
* `# output: int count [Number of cells in table]`: Specification of the output parameter:
   The `int` variable named `count`.

For more details refer to the [full list of header parameters](header-parameters.md).

### Input and output parameters

The most important part of the script header is specification of input and output parameters (variables).
Each parameter is specifies either as input or output.
Datagrok automatically injects _input_ parameters before your script starts,
and captures _output_ parameters when script finishes.
Currently, there is no way to return variables form script in the middle of the script processing.

Datagrok supports all standard type of scalar parameters (integer, float, boolean, string)
In addition, Datagrok offers high-level parameters designed to interact with dataframes.
You can pass to the script whole dataframe, dataframe column, list of columns,
or a binary file.

Find full list and description of supported parameters in the
[Input and output parameters](header-parameters.md#input-and-output-parameters) section.

### How to run a script

Let's save the script and see, how it works.
Built-in editor has **Run** button on the top panel.
Press it to run a script. You will see the following window:
![Running the template script](pics/template-script-run.png)

When you run a script,
with no explicitly specified parameters,
Datagrok analyzes header parameters
to create an input form and properly show the outputs.

Provide a dataframe for the script and press **Ok** to run it.
You can choose already opened dataframe,
open a dataframe from file, or retrieve it via SQL query.

After script finishes, Datagrok collects all output parameters and displays it.
In the provided examples this is a single scalar value, so it will be shown in the **Variables** panel.
You will see the following output:
![The template script output](pics/template-script-output.png)

For additional capabilities of Datagrok script editor, see the
[Working with Datagrok script editor](#working-with-datagrok-script-editor) section.

## More  Datagrok scripting

### Dataframes, scalars and default values

The template script accepts the **dataframe** as input parameter.
For [Python](https://www.python.org/) this parameter
is a [Pandas](https://pandas.pydata.org/)
[dataframe](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html).
[R](https://www.r-project.org/) supports dataframes natively.

Let's modify it to accept and return both dataframes and scalars.
We copy original dataframe and add a new ID column to it.
Also, we return the number of rows in the table.

```mdx-code-block
<Tabs>
<TabItem value="python" label="Python" default>
```

```python
#name: DataframeIdDemo
#description: Adding ID column to a dataframe
#language: python
#tags: demo, dataframe
#input: dataframe table [Data table]
#input: string id_column = 'ID' [Name of ID column]
#input: string id_prefix = 'id_' [Prefix for ID column]
#output: dataframe new_table [New table with additional column]
#output: int last_row [number of last row]

new_table = table
l = len(new_table)
new_table[id_column] = [f"{id_prefix}{n:04}" for n in range(l)]
last_row = len(new_table)
```

```mdx-code-block
</TabItem>
<TabItem value="r" label="R">
```

```r
#name: DataframeDemo
#description: Adding new column to a dataframe
#language: r
#tags: demo, dataframe
#input: dataframe table [Data table]
#input: string id_column = 'ID' [Name of ID column]
#input: string id_prefix = 'id_' [Prefix for ID column]
#output: dataframe new_table [New table with additional column]
#output: int last_row [number of last row]

new_table <- table
new_table[id_column] <- paste0(id_prefix, 1:nrow(new_table))
last_row <- nrow(new_table)
```

```mdx-code-block
</TabItem>
</Tabs>
```

When you run the script, you will see the following dialog:
![DataframeIdDemo input](pics/dataframeiddemo-input.png)

Datagrok created the script UI,
populated default values, and creates popups with help text

After running this scrip datagrok automatically opens new dataframe.
It will contain additional column **ID** with the new generated row ID.

## Enhancing script input view

You may customize script view using additional GUI-related options.
These options are, basically, hints to create more user-friendly interface for your scripts.
Options should be listed in curly braces in corresponding header lines.
The order of the hints makes no difference. All options are optional.

### Input captions

You can add an arbitrary caption for an input parameter. Proper caption helps user to understand the meaning of the parameter.

```mdx-code-block
<Tabs>
<TabItem value="input" label="Input" default>
```

```python
# input: double V1 { caption: Initial volume of liquid }
```

```mdx-code-block
</TabItem>
<TabItem value="result" label="Result">
```

![caption-example](caption-example.png)

```mdx-code-block
</TabItem>
</Tabs>
```

### Units

You can add a proper unit label for an input parameter. Unit label will appear in the input form next to the input field.

```mdx-code-block
<Tabs>
<TabItem value="input" label="Input" default>
```

```python
# input: double initialTemp { units: °С }
```

```mdx-code-block
</TabItem>
<TabItem value="result" label="Result">
```

![units-example](units-example.png)

```mdx-code-block
</TabItem>
</Tabs>
```

### Adding viewers for output dataframes

You can specify viewers to review output dataframes in human-friendly way.
Each dataframe parameter may have a list of viewers.
For instance, the following code adds `Scatter plot`
and `Line chart` viewers on input dataframe.

You may see all available viewers opening [demo dataframe](https://public.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/demog.csv)
and opening toolbox on the left.

<details>
<summary> Fantastic viewers and where to find them </summary>
<div>

![viewers-toolbox](viewers-toolbox.png)

</div>
</details>

```mdx-code-block
<Tabs>
<TabItem value="input" label="Input">
```

```python
# name: Adding viewer on output dataframe
# language: javascript
# input: dataframe inputDF
# output: dataframe outputDF { viewer: Line chart | Scatter plot }

outputDF = inputDF
outputDF.name = "DF with linechart"
```

```mdx-code-block
</TabItem>
<TabItem value="result" label="Result">
```

![builtin-viewers](builtin-viewers.png)

```mdx-code-block
</TabItem>
</Tabs>
```

:::tip

Default script view supports viewers for _output_ dataframes only.
You may specify viewers _input_ dataframes using
[Rich function view](scripting-advanced.mdx#using-richfunctionview-input-control)

:::

### Customizing dataframes viewers

Each viewer has a list of customizable properties.
They change how the viewer is rendered and how it behaves.
For instance, you may specify dataframe column used as X axis on scatter plot.

List of available properties differs for each type of viewer.
You may right click on viewer and select `Properties` item in the context menu.
Any of properties listed in the opened property panel
could be specified in `viewer` option.
For example, the following code:

* specifies marker type and size for linechart
* enables regression line rendering for scatterplot

:::tip

Viewer property should be entered in camelCase format.
For example, here "Show regression line" property
of scatteplot becomes `showRegressionLine`.

:::

```mdx-code-block
<Tabs>
<TabItem value="input" label="Input">
```

```python
# name: Viewers customization
# language: javascript
# input: dataframe tempData
# output: dataframe dummyData { viewer: Line chart(markerType: star, markerSize: 15) | Scatter plot(showRegressionLine: true) }
```

```mdx-code-block
</TabItem>
<TabItem value="result" label="Result">
```

![viewers-customization](viewers-customization.png)

```mdx-code-block
</TabItem>
</Tabs>
```

The [RichFunctionView](scripting-advanced.mdx#using-richfunctionview-input-control)
control allows you to create much more complex

## Working with Datagrok script editor

### How to open and edit a script

You can open and edit previously saved script directly on the platform using built-in editor.
To edit an existing script:

* Find it in [Scripts section](https://public.datagrok.ai/scripts).
* Right click on script card. Context menu appears.
* Choose **Edit** action. Built-in editor with script code opens.

### How to debug a script

Currently, Datagrok has limited debugging capabilities.
All scripts except Javascript are executed in isolated environments,
and the only way of communication between the script and Datagrok are returned parameters.

If script throws an unhandled exception, Datagrok catches it and display in an error popup:
![Exception message from a script](pics/script-exception.png)

However, at the moment there is no convenient way to access regular script output.

For big and complicated scripts we recommend you to develop it locally in your IDE,
and then integrate it to Datagrok.

### How to share a script

At that point, your script is only visible to you.
You can also
make it available to the whole community!
All sharing features are located in the Sharing dialog.

* To open it, find your script in [Scripts section](https://public.datagrok.ai/scripts) and right click on it.
* Choose "Share..." option in the context menu. In the opened dialog you will see groups and users with their privileges.
* You may edit list of collaborators, grant or revoke privileges at any moment.

<details>
<summary> Sharing step-by-step </summary>
<div>

![share-demo](sharing.gif)

</div>
</details>

### How to delete a script

* Find your script in [Scripts section](https://public.datagrok.ai/scripts).
* Right click on it. Context menu opens.
* Choose "Delete" option.

:::caution

This action is irreversible!
Your collaborators will lose access to it, and all historical runs will become inaccessible.

:::
