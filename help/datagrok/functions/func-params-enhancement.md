<!-- TITLE: Function parameters enhancement -->
<!-- SUBTITLE: -->

# Function parameters enhancement

When a [function](function.md) is invoked with no explicitly specified parameters, a dialog is shown. The UI is
automatically generated by creating editors for each parameter. Depending on the metadata associated with the
parameters, the editor can be enriched by [validators](../../compute/scripting.md#parameter-validators),
[choices](../../compute/scripting.md#parameter-choices),
and [suggestions](../../compute/scripting.md#parameter-suggestions). Validators, choices, and suggestions
are [functions](function.md), that means they can be implemented in different ways (db query, script, etc), and reused.

In this tutorial, we will create a Python script that that has three parameters - country, vegetable, and saltiness. For
the dialog to be easy to use, we want the country name to be automatically suggested as user types it, vegetable should
be selected from list of choices, and saltiness should fall into the specified range.

To achieve the desired outcome, we will use the following features:

* [validators](../../compute/scripting.md#parameter-validators)
* [choices](../../compute/scripting.md#parameter-choices)
* [suggestions](../../compute/scripting.md#parameter-suggestions)

## 1. creating a vanilla python script

Let's start with Python script and it's parameters:

* open script editor: Tools | Scripting | New | Python
* paste code
* save script using "Save" button on toolbar
* now you can run script using "Run" button on toolbar

```python
# name: Example
# language: python
# input: string country
# input: string vegetable
# input: double saltiness
```

This is how parameters dialog looks like:

![Before](../../uploads/gifs/tutorials/func-params-enhancement-fig-1.gif "Before")

## 2. annotating the python script

Every function parameter in Datagrok has [options](../../compute/scripting.md#options) where validators, choices and
suggestions functions can be specified. For "country", we want to call a function that suggests country based on the
already entered text (jsSuggestCountryName). For "
vegetable", we will register function that returns list of vegetables (jsVeggies). For "saltiness", we need a validator
to check if the parameter value falls in the specified range. Also, we want to add the default values to each parameter.

Here is the modified script:

```python
#name: Example
#language: python
#input: string country {suggestions: jsSuggestCountryName}
#input: string vegetable {choices: jsVeggies}
#input: double saltiness {validators: ["jsSaltinessRange"]}
```

Next step is registering functions. To do that, we are going to use [JS API](../../develop/js-api.md).

Let's open JS editor:

* Tools | Scripting | JavaScript
* paste code of corresponding JS functions
* run using "Run" button on toolbar

## 3. writing a parameter value suggestion function

Suggests country by name:

```javascript
grok.functions.register({
  signature: 'List<String> jsSuggestCountryName(String text)',
  isAsync: true,
  run: async function(text) {
    let response = await fetch('https://restcountries.eu/rest/v2/name/' + text);
    return response.status === 200 ? (await response.json()).map(country => country['name']) : [];
  }
});
```

## 4. writing a choice list function

Returns veggies list:

```javascript
grok.functions.register({
    signature: 'List<String> jsVeggies()',
    run: () => ["Artichoke", "Cucumber", "Cauliflower", "Onion"]});
```

## 5. writing a validation function

Checks saltiness range:

```javascript
grok.functions.register({
    signature: 'List<String> jsSaltinessRange(double input)',
    run: (input) => input >= 0 && input <= 100 ? null : "Saltiness is out of range"});
```

Now you can re-run Python script and see following parameters dialog:

![After](../../uploads/gifs/tutorials/func-params-enhancement-fig-2.gif "After")

See also:

* [Scripting](../../compute/scripting.md)
